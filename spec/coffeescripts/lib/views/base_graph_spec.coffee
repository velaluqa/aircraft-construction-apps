describe 'ILR.Views.BaseGraph', ->
  describe '#roundStepSize', ->
    beforeEach ->
      @graph = new ILR.Views.BaseGraph()

    it 'should round very small stepsizes', ->
      expect(@graph.roundStepSize(0.000001234)).toEqual(0.000002)
      expect(@graph.roundStepSize(0.000002345)).toEqual(0.000005)
      expect(@graph.roundStepSize(0.000003456)).toEqual(0.000005)
      expect(@graph.roundStepSize(0.000004567)).toEqual(0.000005)
      expect(@graph.roundStepSize(0.000005678)).toEqual(0.00001)
      expect(@graph.roundStepSize(0.000006789)).toEqual(0.00001)
      expect(@graph.roundStepSize(0.000007891)).toEqual(0.00001)
      expect(@graph.roundStepSize(0.000008912)).toEqual(0.00001)
      expect(@graph.roundStepSize(0.000009123)).toEqual(0.00001)

      expect(@graph.roundStepSize(0.00001234)).toEqual(0.00002)
      expect(@graph.roundStepSize(0.00002345)).toEqual(0.00005)
      expect(@graph.roundStepSize(0.00003456)).toEqual(0.00005)
      expect(@graph.roundStepSize(0.00004567)).toEqual(0.00005)
      expect(@graph.roundStepSize(0.00005678)).toEqual(0.0001)
      expect(@graph.roundStepSize(0.00006789)).toEqual(0.0001)
      expect(@graph.roundStepSize(0.00007891)).toEqual(0.0001)
      expect(@graph.roundStepSize(0.00008912)).toEqual(0.0001)
      expect(@graph.roundStepSize(0.00009123)).toEqual(0.0001)

      expect(@graph.roundStepSize(0.0001234)).toEqual(0.0002)
      expect(@graph.roundStepSize(0.0002345)).toEqual(0.0005)
      expect(@graph.roundStepSize(0.0003456)).toEqual(0.0005)
      expect(@graph.roundStepSize(0.0004567)).toEqual(0.0005)
      expect(@graph.roundStepSize(0.0005678)).toEqual(0.001)
      expect(@graph.roundStepSize(0.0006789)).toEqual(0.001)
      expect(@graph.roundStepSize(0.0007891)).toEqual(0.001)
      expect(@graph.roundStepSize(0.0008912)).toEqual(0.001)
      expect(@graph.roundStepSize(0.0009123)).toEqual(0.001)

      expect(@graph.roundStepSize(0.001234)).toEqual(0.002)
      expect(@graph.roundStepSize(0.002345)).toEqual(0.005)
      expect(@graph.roundStepSize(0.003456)).toEqual(0.005)
      expect(@graph.roundStepSize(0.004567)).toEqual(0.005)
      expect(@graph.roundStepSize(0.005678)).toEqual(0.01)
      expect(@graph.roundStepSize(0.006789)).toEqual(0.01)
      expect(@graph.roundStepSize(0.007891)).toEqual(0.01)
      expect(@graph.roundStepSize(0.008912)).toEqual(0.01)
      expect(@graph.roundStepSize(0.009123)).toEqual(0.01)

      expect(@graph.roundStepSize(0.01234)).toEqual(0.02)
      expect(@graph.roundStepSize(0.02345)).toEqual(0.05)
      expect(@graph.roundStepSize(0.03456)).toEqual(0.05)
      expect(@graph.roundStepSize(0.04567)).toEqual(0.05)
      expect(@graph.roundStepSize(0.05678)).toEqual(0.1)
      expect(@graph.roundStepSize(0.06789)).toEqual(0.1)
      expect(@graph.roundStepSize(0.07891)).toEqual(0.1)
      expect(@graph.roundStepSize(0.08912)).toEqual(0.1)
      expect(@graph.roundStepSize(0.09123)).toEqual(0.1)

      expect(@graph.roundStepSize(0.1234)).toEqual(0.2)
      expect(@graph.roundStepSize(0.2345)).toEqual(0.5)
      expect(@graph.roundStepSize(0.3456)).toEqual(0.5)
      expect(@graph.roundStepSize(0.4567)).toEqual(0.5)
      expect(@graph.roundStepSize(0.5678)).toEqual(1.0)
      expect(@graph.roundStepSize(0.6789)).toEqual(1.0)
      expect(@graph.roundStepSize(0.7891)).toEqual(1.0)
      expect(@graph.roundStepSize(0.8912)).toEqual(1.0)
      expect(@graph.roundStepSize(0.9123)).toEqual(1.0)

      expect(@graph.roundStepSize(1.234)).toEqual(2)
      expect(@graph.roundStepSize(2.345)).toEqual(5)
      expect(@graph.roundStepSize(3.456)).toEqual(5)
      expect(@graph.roundStepSize(4.567)).toEqual(5)
      expect(@graph.roundStepSize(5.678)).toEqual(10)
      expect(@graph.roundStepSize(6.789)).toEqual(10)
      expect(@graph.roundStepSize(7.891)).toEqual(10)
      expect(@graph.roundStepSize(8.912)).toEqual(10)
      expect(@graph.roundStepSize(9.123)).toEqual(10)

      expect(@graph.roundStepSize(12.345)).toEqual(20)
      expect(@graph.roundStepSize(23.456)).toEqual(50)
      expect(@graph.roundStepSize(34.567)).toEqual(50)
      expect(@graph.roundStepSize(45.678)).toEqual(50)
      expect(@graph.roundStepSize(56.780)).toEqual(100)
      expect(@graph.roundStepSize(67.891)).toEqual(100)
      expect(@graph.roundStepSize(78.912)).toEqual(100)
      expect(@graph.roundStepSize(89.123)).toEqual(100)
      expect(@graph.roundStepSize(91.234)).toEqual(100)

      expect(@graph.roundStepSize(123.456)).toEqual(200)
      expect(@graph.roundStepSize(234.567)).toEqual(500)
      expect(@graph.roundStepSize(345.678)).toEqual(500)
      expect(@graph.roundStepSize(456.789)).toEqual(500)
      expect(@graph.roundStepSize(567.801)).toEqual(1000)
      expect(@graph.roundStepSize(678.912)).toEqual(1000)
      expect(@graph.roundStepSize(789.123)).toEqual(1000)
      expect(@graph.roundStepSize(891.234)).toEqual(1000)
      expect(@graph.roundStepSize(912.345)).toEqual(1000)

      expect(@graph.roundStepSize(NaN)).toEqual(NaN)
      expect(@graph.roundStepSize(undefined)).toEqual(undefined)
      expect(@graph.roundStepSize(null)).toEqual(null)
